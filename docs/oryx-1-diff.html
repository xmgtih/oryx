
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-04-21
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Oryx - Oryx 2 Design Goals</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/united/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="../css/bootswatch.css" rel="stylesheet" />
		<link href="../css/reflow-skin.css" rel="stylesheet" />


		<link href="../css/lightbox.css" rel="stylesheet" />

		<link href="../css/site.css" rel="stylesheet" />
		<link href="../css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-docs-oryx-1-diff project-oryx" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="index.html">Oryx 2</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="../overview.html" title="Overview">Overview</a></li>
							<li ><a href="index.html" title="Documentation">Documentation</a></li>
							<li ><a href="../contribute.html" title="Contribute">Contribute</a></li>
							<li ><a href="../download.html" title="Download">Download</a></li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://oryxproject.github.io/oryx/" id="bannerLeft"><h1>Oryx</h1></a>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li class="projectVersion version-date">Version: 2.0.0-SNAPSHOT</li>
				<li class="divider">|</li>
				<li class="publishDate version-date">Last Published: 2015-04-21</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<p>In broad terms, Oryx 2 is more extensible and scalable, and built on more modern technology than Oryx 1, which began from a design 4 years old now. It is however, a more complex system to deploy and operate. This page highlights some key differences.</p> 
<div class="page-header">
 <h1 id="oryx_2_design_goals">Oryx 2 Design Goals</h1>
</div> 
<ol style="list-style-type: decimal"> 
 <li>Provide a more reusable platform for <a class="externalLink" href="http://lambda-architecture.net/">lambda-architecture</a>-style designs, with batch, speed and serving layers</li> 
 <li>Make each layer usable independently</li> 
 <li>Better support for common machine learning needs</li> 
</ol> 
<ul> 
 <li>Test/train set split and evaluation</li> 
 <li>Parallel model build</li> 
 <li>Hyper-parameter selection</li> 
</ul> 
<ol style="list-style-type: decimal"> 
 <li>Use newer technologies like Spark and Streaming in order to simplify:</li> 
</ol> 
<ul> 
 <li>Remove separate in-core implementations for scale-down</li> 
 <li>Remove custom data transport implementation in favor of <a class="externalLink" href="http://kafka.apache.org/">Apache Kafka</a></li> 
 <li>Use a ‘real’ streaming framework instead of reimplementing a simple one</li> 
 <li>Remove complex MapReduce-based implementations in favor of <a class="externalLink" href="http://spark.apache.org/">Apache Spark</a>-based implementations</li> 
</ul> 
<ol style="list-style-type: decimal"> 
 <li>Support more input (i.e. not just <a class="externalLink" href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV</a>)</li> 
</ol> 
<h1 id="key_differences">Key Differences</h1> 
<div class="section"> 
 <h2 id="Architecture">Architecture</h2> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <thead> 
   <tr class="a"> 
    <th>Oryx 1 </th> 
    <th>Oryx 2 </th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr class="b"> 
    <td>One monolithic “tier” for lambda architecture and apps </td> 
    <td>Three tiers: lambda, ML, apps </td> 
   </tr> 
   <tr class="a"> 
    <td>No app-level extensibility </td> 
    <td>Platform for building other lambda- and ML-based apps </td> 
   </tr> 
   <tr class="b"> 
    <td>Two layers: Computation and Serving </td> 
    <td>Three layers: Batch, Speed and Serving </td> 
   </tr> 
   <tr class="a"> 
    <td>Based on Crunch, MapReduce, HDFS, Tomcat </td> 
    <td>Based on HDFS, YARN, Spark (+ Streaming, MLlib), Kafka, Zookeeper, Tomcat </td> 
   </tr> 
   <tr class="b"> 
    <td>27K lines production code / 4K test </td> 
    <td>10K lines production code / 7.5K test: simpler, better tested </td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<div class="section"> 
 <h2 id="Deployment">Deployment</h2> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <thead> 
   <tr class="a"> 
    <th>Oryx 1 </th> 
    <th>Oryx 2 </th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr class="b"> 
    <td>Requires Java 6, optionally core Hadoop 2.2+ (including “MR1”) </td> 
    <td>Requires Java 7, core Hadoop 2.5+ (YARN, not “MR1”) Spark 1.3+, Kafka 0.8.2+, Zookeeper 3.4.5+ </td> 
   </tr> 
   <tr class="a"> 
    <td>Supports local, non-Hadoop deployment </td> 
    <td>No non-Hadoop deployment </td> 
   </tr> 
   <tr class="b"> 
    <td>Supports MapReduce-based Hadoop deployment </td> 
    <td>Supports only deployment with core Hadoop, YARN, Spark, Kafka </td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<div class="section"> 
 <h2 id="Scale_and_Reliability">Scale and Reliability</h2> 
 <table border="0" class="bodyTable table table-striped table-hover"> 
  <thead> 
   <tr class="a"> 
    <th>Oryx 1 </th> 
    <th>Oryx 2 </th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr class="b"> 
    <td>Memory-efficient </td> 
    <td>Fast, memory-hungry </td> 
   </tr> 
   <tr class="a"> 
    <td>Custom, best-effort data transport between layers </td> 
    <td>Reliable data transport via Kafka </td> 
   </tr> 
   <tr class="b"> 
    <td>Custom MapReduce-based algorithm implementations in Computation Layer </td> 
    <td>Spark Streaming-based batch layer framework and Spark MLlib-based algorithm implementations </td> 
   </tr> 
   <tr class="a"> 
    <td>Custom in-core incremental model update (“speed layer”) </td> 
    <td>Spark Streaming-based distributed model update </td> 
   </tr> 
  </tbody> 
 </table> 
 <h1 id="migration_guide">Migration Guide</h1> 
 <p>The bad news is that no direct migration is possible between Oryx 1 and Oryx 2; they have very different implementations. However, differences in the user- and developer-facing aspects are by design similar or identical.</p> 
</div> 
<div class="section"> 
 <h2 id="REST_API">REST API</h2> 
 <p>Oryx 2 contains the same set of end-to-end ML applications as Oryx 1, and exposes virtually the same REST API, unchanged. The only significant difference is that there is no longer a <tt>/refresh</tt> endpoint, because it is unnecessary.</p> 
</div> 
<div class="section"> 
 <h2 id="Configuration">Configuration</h2> 
 <p>Both implementations use a single configuration file parsed by Typesafe Config. The property namespaces are different but there are some similarities. Compare the <a class="externalLink" href="https://github.com/cloudera/oryx/blob/master/common/src/main/resources/reference.conf">Oryx 1 configuration</a> to the <a class="externalLink" href="https://github.com/OryxProject/oryx/blob/master/oryx-common/src/main/resources/reference.conf">Oryx 2 configuration</a> to understand some of the correspondence and difference.</p> 
</div> 
<div class="section"> 
 <h2 id="Data_Storage_and_Transport">Data Storage and Transport</h2> 
 <p>In Oryx 1, all data was stored in a series of directories in HDFS. In Oryx 2, data is transported via Kafka (which ultimately stores data in HDFS) and in HDFS as managed by a Spark Streaming process. Although it is still possible to side-load data files via HDFS in Oryx 2, it is not supported and is discouraged, in favor of sending data directly to a Kafka queue.</p> 
</div> 
<div class="section"> 
 <h2 id="Data_Formats">Data Formats</h2> 
 <p>In theory, the framework is agnostic to data types and encodings passed between layers. In practice, the provided applications consume the same CSV-encoded data format as Oryx 1.</p> 
</div> 
<div class="section"> 
 <h2 id="Deployment">Deployment</h2> 
 <p>The deployment requirements are the most different. Although all layers are still distributed as Java <tt>.jar</tt> binaries, now, a Hadoop cluster is required, including HDFS, YARN, Kafka, Spark, and Zookeeper services. Your environment or cluster must be updated to include these services before you can use Oryx 2.</p> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li><a href="#oryx_2_design_goals" title="Oryx 2 Design Goals">Oryx 2 Design Goals</a>
		<li class="dropdown"><a href="#key_differences" title="Key Differences">Key Differences <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Architecture" title="Architecture">Architecture</a>
		<li><a href="#Deployment" title="Deployment">Deployment</a>
		<li><a href="#Scale_and_Reliability" title="Scale and Reliability">Scale and Reliability</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#migration_guide" title="Migration Guide">Migration Guide <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#REST_API" title="REST API">REST API</a>
		<li><a href="#Configuration" title="Configuration">Configuration</a>
		<li><a href="#Data_Storage_and_Transport" title="Data Storage and Transport">Data Storage and Transport</a>
		<li><a href="#Data_Formats" title="Data Formats">Data Formats</a>
		<li><a href="#Deployment" title="Deployment">Deployment</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014-2015. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="../js/lightbox.min.js"></script>
	<script src="../js/reflow-scroll.js"></script>

	<script src="../js/reflow-skin.js"></script>

	</body>
</html>
